var libu = {
	/** 孕妇分类 **/
	pregnantCategory: function() {
		libu.post({url:basePath+"pregnanttype/pregnanttype_findCategory.action"}, libu.pregnantCategoryCallback);
	},
	/** 孕妇分类回调函数 **/
	pregnantCategoryCallback: function(msg) {
		var data = '';
		if(msg!=null && msg.length>0) {
			$(msg).each(function() {
				var ids = "";
				$(this.list).each(function() {
					ids += this.id + "&";
				});
				data += '<dl class="byr-dl">';
				data += '<dt><img src="../../images/beiyun_06.jpg" width="24" height="26"><a href="javascript:;" onclick="libu.pregnantCategoryLink(\''+ids+'\')">'+this.name+'</a></dt>';
				data += '<dd>'
				$(this.list).each(function() {
					data += '<a href="javascript:;" onclick="libu.pregnantCategoryList(\''+this.id+'\')">'+this.name+'</a>';
				});
				data += '<div style="clear:both"></div></dd>';
				data += '</dl>';
			});
		}
		$("#pregant_type").html(data);
	},
	
	/** 一级分类 **/
	pregnantCategoryLink: function(ids) {
		libu.post({url:basePath+"pregnantart/pregnantart_findArticleCategoryList.action", data: {ids: ids==undefined?"":ids, size:8}}, libu.pregnantCategoryList);
	},
	/** 二级分类的文章列表 **/
	pregnantCategoryList: function(msg) {
		if(msg.length>0) {
			$(msg).each(function(i) {
				var _html = '';
				if(i==0) {
					_html += '<div class="bynews-l l pk"><p>'+this.map.name+'</p><img src="../../images/beiyun_04.jpg" width="288" height="204"></div>';
					_html += '<dl><dt><a href="'+basePath+'pregnantart/pregnantart_findPregnantArticleDetail.action?id='+this.list[0].id+'&pid='+this.map.id+'">'+this.list[0].title+'</a></dt><dd>'+this.list[0].summary+'……<a href="'+basePath+'pregnantart/pregnantart_findPregnantArticleDetail.action?id='+this.list[0].id+'&pid='+this.map.id+'">[详细]</a></dd></dl>';
					_html += '<ul>';
					$(this.list).each(function(n) {
						if(n<5) {
							_html += '<li><a href="'+basePath+'pregnantart/pregnantart_findPregnantArticleDetail.action?id='+this.id+'">'+this.title+'</a></li>';
						}
					});
					_html += '</ul>';
					$("#style_0").html(_html);
				} else {
					_html += '<p class="bycont-title">'+this.map.name+'</p>';/** <p class="bycont-title">孕前<span>检查</span></p> */
					_html += '<a href="'+basePath+'pregnantart/pregnantart_findPregnantArticleList.action?id='+this.list[0].id+'&pid='+this.map.id+'" class="by-more">[更多]</a>';
					_html += '<ul>';
					$(this.list).each(function(n) {
						_html += '<li><a href="'+basePath+'pregnantart/pregnantart_findPregnantArticleDetail.action?id='+this.id+'">'+this.title+'</a></li>';
					});
					_html += '</ul>';
					if(i==1) {
						$("#style_1").html(_html);
					} else if(i==2) {
						$("#style_2").html(_html);
					} else if(i==3) {
						$("#style_3").html(_html);
					} else if(i==4) {
						$("#style_4").html(_html);
					}
				}
			});
		}
	},
	pregnantArticleDetail: function(id) {
		
	},
	
	
	/** ajax的post公共调用方法 **/
	post: function(option, callback) {
		$.ajax({
			type:"POST",
			async:(!!option.async)?false:true,
			url:option.url,
			data:option.data,
			success: function(msg) {
				!!callback==true?callback(msg):"";
			}
		})
	},
	post2: function(option, callback) {
		$.post(option.url, option.data, function(msg) {
			!!callback==true?callback(msg):"";
		})
	}
};
/** 孕妇健康相关操作初始化调用 **/
var pregnantType = {
	init: function() {
		libu.pregnantCategory();
		libu.pregnantCategoryLink();
	},
	detail_init: function() {
		var navigate = $("div[name=navigate]");
		var id = navigate.attr("id");
		var pid = navigate.attr("pid");
		libu.post({url:basePath+"pregnantart/pregnantart_findNavigation.action", data: {id: id+"", pid:pid+""}}, function(msg) {
			if(msg!=null && msg.length>0) {
				var navigation = "当前位置：";
				$(msg).each(function(i) {
					if(i<msg.length-1) {
						navigation += '<a href="#">'+this+'</a>&nbsp;&gt;&nbsp;';//<a href="#">孕妇健康</a>&nbsp;&gt;&nbsp;孕育常识
					} else {
						navigation += this;
					}
				});
				navigate.html(navigation);
			}
		});
	}
}